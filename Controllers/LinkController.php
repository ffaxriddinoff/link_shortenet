<?phpnamespace Controllers;use Models\Link;class LinkController extends Controller{    private Link $link;    public function __construct()    {        parent::__construct();        $this->link = new Link($this->db);    }    public function create()    {        session_start();        if (!isset($_SESSION['user_id'])) {            header('Location: /login');            exit;        }        if ($_SERVER['REQUEST_METHOD'] == 'POST') {            $userId = $_SESSION['user_id'];            $originalUrl = trim($_POST['original_link']);            if (!$this->link->isValidUrl($originalUrl)) {                $_SESSION['error'] = 'invalid url';                header('Location: /');                return;            }            $shortenedUrl = $this->generateShortLink();            if ($this->link->create($userId, $originalUrl, $shortenedUrl)) {                header('Location: /');                exit;            } else {                echo "Error creating link";            }        } else {            require __DIR__ . '/../Views/link/list.php';        }    }    private function generateShortLink()    {        // Simple function to generate a random string        return substr(str_shuffle(str_repeat($x='0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ', ceil(5/strlen($x)) )),1,5);    }    public function redirectToOriginal($shortenedUrl)    {        $originalUrl = $this->link->findOriginalUrlByShortened($shortenedUrl);        if ($originalUrl) {            header("Location: $originalUrl", true, 302);            exit;        } else {            echo "No such link found!";            die();        }    }}